<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get US daily mobility data from Descartes Labs — descartes_mobility_data • sars2pack</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get US daily mobility data from Descartes Labs — descartes_mobility_data"><meta property="og:description" content="Descartes Labs quantify the level of human mobility in the US at
the state level. Their methodology looks at a collection of mobile
devices reporting consistently throughout the day. They calculate the
maximum distance moved in kilometers (excluding outliers) from the
first reported location. Using this value, they calculate the median
across all devices in the sample to generate a mobility metric for
selected states."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-93043521-4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-93043521-4');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sars2pack</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.99.22</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/overview.html">Getting Started</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/seandavi/sars2pack" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get US daily mobility data from Descartes Labs</h1>
    <small class="dont-index">Source: <a href="https://github.com/seandavi/sars2pack/blob/HEAD/R/descartes_mobility.R" class="external-link"><code>R/descartes_mobility.R</code></a></small>
    <div class="hidden name"><code>descartes_mobility_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Descartes Labs quantify the level of human mobility in the US at
the state level. Their methodology looks at a collection of mobile
devices reporting consistently throughout the day. They calculate the
maximum distance moved in kilometers (excluding outliers) from the
first reported location. Using this value, they calculate the median
across all devices in the sample to generate a mobility metric for
selected states.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">descartes_mobility_data</span><span class="op">(</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="source">
    <h2>Source</h2>
    
<ul><li><p><a href="https://raw.githubusercontent.com/descarteslabs/DL-COVID-19/master/DL-us-mobility-daterow.csv" class="external-link">https://raw.githubusercontent.com/descarteslabs/DL-COVID-19/master/DL-us-mobility-daterow.csv</a></p></li>
</ul></div>
    <div id="value">
    <h2>Value</h2>
    <ul><li><p>country_code: ISO 3166-1 alpha-2 code.</p></li>
<li><p>admin_level: 0 for country, 1 for admin1, 2 for admin2 granularity.</p></li>
<li><p>admin1: GeoNames ADM1 feature name for the first-order administrative division, such as a state in the United States.</p></li>
<li><p>admin2: GeoNames ADM2 feature name for the second-order administrative division, such as a county or borough in the United States.</p></li>
<li><p>fips: FIPS code, a standard geographic identifier, to make it easier to combine this data with other data sets.</p></li>
<li><p>samples: The number of samples observed in the specified region.</p></li>
<li><p>m50: The median of the max-distance mobility for all samples in the specified region.</p></li>
<li><p>m50_index: The percent of normal m50 in the region, with normal m50 defined during 2020-02-17 to 2020-03-07.</p></li>
</ul></div>
    <div id="license">
    <h2>License</h2>
    


<p>Creative Commons Attribution (CC BY 4.0), see <a href="https://github.com/descarteslabs/DL-COVID-19" class="external-link">https://github.com/descarteslabs/DL-COVID-19</a></p>
    </div>
    <div id="references">
    <h2>References</h2>
    
<ul><li><p><a href="https://www.descarteslabs.com/mobility-v097/" class="external-link">https://www.descarteslabs.com/mobility-v097/</a></p></li>
<li><p><a href="https://www.descarteslabs.com/wp-content/uploads/2020/03/mobility-v097.pdf" class="external-link">https://www.descarteslabs.com/wp-content/uploads/2020/03/mobility-v097.pdf</a></p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other data-import: 
<code><a href="acaps_government_measures_data.html">acaps_government_measures_data</a>()</code>,
<code><a href="acaps_secondary_impact_data.html">acaps_secondary_impact_data</a>()</code>,
<code><a href="apple_mobility_data.html">apple_mobility_data</a>()</code>,
<code><a href="beoutbreakprepared_data.html">beoutbreakprepared_data</a>()</code>,
<code><a href="cci_us_vaccine_data.html">cci_us_vaccine_data</a>()</code>,
<code><a href="cdc_aggregated_projections.html">cdc_aggregated_projections</a>()</code>,
<code><a href="cdc_excess_deaths.html">cdc_excess_deaths</a>()</code>,
<code><a href="cdc_social_vulnerability_index.html">cdc_social_vulnerability_index</a>()</code>,
<code><a href="coronadatascraper_data.html">coronadatascraper_data</a>()</code>,
<code><a href="coronanet_government_response_data.html">coronanet_government_response_data</a>()</code>,
<code><a href="cov_glue_lineage_data.html">cov_glue_lineage_data</a>()</code>,
<code><a href="cov_glue_newick_data.html">cov_glue_newick_data</a>()</code>,
<code><a href="cov_glue_snp_lineage.html">cov_glue_snp_lineage</a>()</code>,
<code><a href="covidtracker_data.html">covidtracker_data</a>()</code>,
<code><a href="ecdc_data.html">ecdc_data</a>()</code>,
<code><a href="econ_tracker_consumer_spending.html">econ_tracker_consumer_spending</a></code>,
<code><a href="econ_tracker_employment.html">econ_tracker_employment</a></code>,
<code><a href="econ_tracker_unemp_data.html">econ_tracker_unemp_data</a></code>,
<code><a href="economist_excess_deaths.html">economist_excess_deaths</a>()</code>,
<code><a href="financial_times_excess_deaths.html">financial_times_excess_deaths</a>()</code>,
<code><a href="google_mobility_data.html">google_mobility_data</a>()</code>,
<code><a href="government_policy_timeline.html">government_policy_timeline</a>()</code>,
<code><a href="jhu_data.html">jhu_data</a>()</code>,
<code><a href="jhu_us_data.html">jhu_us_data</a>()</code>,
<code><a href="kff_icu_beds.html">kff_icu_beds</a>()</code>,
<code><a href="nytimes_county_data.html">nytimes_county_data</a>()</code>,
<code><a href="oecd_unemployment_data.html">oecd_unemployment_data</a>()</code>,
<code><a href="owid_data.html">owid_data</a>()</code>,
<code><a href="param_estimates_published.html">param_estimates_published</a>()</code>,
<code><a href="test_and_trace_data.html">test_and_trace_data</a>()</code>,
<code><a href="us_county_geo_details.html">us_county_geo_details</a>()</code>,
<code><a href="us_county_health_rankings.html">us_county_health_rankings</a>()</code>,
<code><a href="us_healthcare_capacity.html">us_healthcare_capacity</a>()</code>,
<code><a href="us_hospital_details.html">us_hospital_details</a>()</code>,
<code><a href="us_state_distancing_policy.html">us_state_distancing_policy</a>()</code>,
<code><a href="usa_facts_data.html">usa_facts_data</a>()</code>,
<code><a href="who_cases.html">who_cases</a>()</code></p>
<p>Other mobility: 
<code><a href="apple_mobility_data.html">apple_mobility_data</a>()</code>,
<code><a href="google_mobility_data.html">google_mobility_data</a>()</code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Sean Davis <a href="mailto:seandavi@gmail.com">seandavi@gmail.com</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span class="r-in"><span class="va">res</span> <span class="op">=</span> <span class="fu">descartes_mobility_data</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "date"        "iso2"        "admin_level" "admin1"      "admin2"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6] "fips"        "samples"     "m50"         "m50_index"  </span>
<span class="r-in"><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Rows: 1,074,614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Columns: 9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ date        <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2020-03-01, 2020-03-02, 2020-03-03, 2020-03-04, 2020-03-0…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ iso2        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "US", "US", "US", "US", "US", "US", "US", "US", "US", "US"…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ admin_level <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ admin1      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Alabama", "Alabama", "Alabama", "Alabama", "Alabama", "Al…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ admin2      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ fips        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "00001", "00001", "00001", "00001", "00001", "00001", "000…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ samples     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 133826, 143632, 146009, 149352, 144109, 141491, 141163, 13…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ m50         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 8.331, 10.398, 10.538, 10.144, 10.982, 13.024, 11.373, 8.5…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ m50_index   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 79, 98, 100, 96, 104, 123, 107, 80, 103, 103, 103, 111, 11…</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># plot data for Georgia</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># this gets us state-level data</span></span>
<span class="r-in"><span class="va">GA</span> <span class="op">=</span> <span class="va">res</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">admin1</span><span class="op">==</span><span class="st">'Georgia'</span> <span class="op">&amp;</span> <span class="va">admin_level</span><span class="op">==</span><span class="fl">1</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">GA</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">date</span>, y<span class="op">=</span><span class="va">m50_index</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">'M50 index over time in Georgia'</span><span class="op">)</span></span>
<span class="r-plt img"><img src="descartes_mobility_data-1.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#limit to dates of interest around time that GA is reopening</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">GA</span> <span class="op">=</span> <span class="va">GA</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">date</span><span class="op">&gt;</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">'2020-01-01'</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">date</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">'2020-06-01'</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">GA</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">date</span>, y<span class="op">=</span><span class="va">m50_index</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in">    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in">    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">'M50 index over time in Georgia'</span><span class="op">)</span></span>
<span class="r-plt img"><img src="descartes_mobility_data-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span class="co"># Obviously, there are day-specific effects, so use</span></span>
<span class="r-in"><span class="co"># R to "regress out" the effects of day of week to better</span></span>
<span class="r-in"><span class="co"># observe trend.</span></span>
<span class="r-in"><span class="va">GA</span> <span class="op">=</span> <span class="va">GA</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>dow <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html" class="external-link">wday</a></span><span class="op">(</span><span class="va">date</span>, label<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">lmfit</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">m50_index</span> <span class="op">~</span> <span class="va">dow</span>, data <span class="op">=</span> <span class="va">GA</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># We are interested in the residuals, or</span></span>
<span class="r-in"><span class="co"># the variation in the data not explained by</span></span>
<span class="r-in"><span class="co"># the day of the week.</span></span>
<span class="r-in"><span class="va">GA</span><span class="op">$</span><span class="va">m50_index_regressed</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/residuals.html" class="external-link">residuals</a></span><span class="op">(</span><span class="va">lmfit</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">GA</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">date</span>, y<span class="op">=</span><span class="va">m50_index_regressed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in">    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in">    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span>
<span class="r-plt img"><img src="descartes_mobility_data-3.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Compare states</span></span>
<span class="r-in"><span class="va">states</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"New York"</span>, <span class="st">"California"</span>, <span class="st">"Nevada"</span>,</span>
<span class="r-in">           <span class="st">"Texas"</span>, <span class="st">"Georgia"</span>, <span class="st">"Florida"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ST</span> <span class="op">=</span> <span class="va">res</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">          <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">admin1</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">states</span> <span class="op">&amp;</span> <span class="va">admin_level</span><span class="op">==</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">          <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>dow <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html" class="external-link">wday</a></span><span class="op">(</span><span class="va">date</span>, label<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">lmfit</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">m50_index</span> <span class="op">~</span> <span class="va">dow</span> <span class="op">+</span> <span class="va">admin1</span>, data <span class="op">=</span> <span class="va">ST</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ST</span><span class="op">$</span><span class="va">m50_index_regressed</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/residuals.html" class="external-link">residuals</a></span><span class="op">(</span><span class="va">lmfit</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">ST</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">date</span>, y<span class="op">=</span><span class="va">m50_index_regressed</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in">    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in">    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in">    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="st">'admin1'</span>, nrow<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in">    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">'Mobility index differences across states'</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using method = 'loess' and formula 'y ~ x'</span>
<span class="r-plt img"><img src="descartes_mobility_data-4.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sean Davis, VJ Carey.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

